$((function(){var e=$('[data-news-select-submit][name="year"]').val();let t="",a=!1,l=[],r=[];const s=FUNC.getUrlVars();let n="";e=(new Date).getFullYear();null!=s.year_filter&&(t=s.year_filter,a=!0),null!=s.category_filter&&(n=s.category_filter),$("[data-fs]").flexibleSearch({searchDataPath:$("[data-fs-path]").data("fs-path"),searchDataPathPreload:null,resultMetaTitleRewrite:!1,cache:!1,searchFormCreation:!1,loadingImgPath:"",loadingImgHTML:null,resultBlockId:"fs-result",resultItemTmpl:$("[data-fs-tmpl-result]").html(),resultMsgId:null,resultMsgTmpl:$("[data-fs-tmpl-msg]").html(),hidePageNumber:!1,paginateId:null,paginateClassName:"m-box-pager",paginateTmpl:$("[data-tmpl-fs-pager]").html(),limit:20,initialParameter:"offset=0",paginateCount:1,showTurnPage:!0,prevPageText:"Prev",nextPageText:"Next",maxPageCount:999999,customSearch:function(e,r){let s=!1,i=e.category.split("//");return""!=n?-1!=$.inArray(n,i)&&0==a&&(""==t||t<e.year)&&(t=e.year):0==a&&(""==t||t<e.year)&&(t=e.year),""!=n?-1!=$.inArray(n,i)&&e.date.indexOf(t)>-1&&(s=!0):e.date.indexOf(t)>-1&&(s=!0),l.push(e),s},modifyResultJSON:function(e){return e},resultComplete:function(a){let i="";null!=s.category_filter?$('[name="category_filter"][value="'+s.category_filter+'"]').addClass("is-current"):$('[name="category_filter"][value=""]').addClass("is-current"),$(".m-box-pager .pager-data").find(".list-item").length<2?$(".m-box-pager").hide():($("[data-news-offset-change]").val($(".m-box-pager").find(".fs-current-link").data("news-offset")),$("[data-news-offset-change]").on("change",(function(e){$this=$(this),$(".m-box-pager").find("[data-news-offset="+$this.val()+"]").trigger("click")})),$("[data-news-total]").text($(".m-box-pager .pager-data .list-item:last-child .item-btn").data("news-offset"))),"pc"!=SETTING.DEVICE?$("[data-fs] .item-sp-hidden").remove():$("[data-fs] .item-pc-hidden").remove(),0==$("#fs-result").find(".m-list-news").find("li").length&&("es"==$("html").prop("lang")?$("#fs-result").prepend('<p class="m-txt-p">Sorry, there is no related news available.</p>'):$("#fs-result").prepend('<p class="m-txt-p">No hay noticias aplicables</p>'));var d=$("#fs-result-info");l.forEach((function(e){let t=e.category.split("//");if(""!=n){if(-1!=$.inArray(n,t)){let t="";t=e.date.replace(/(\d{4}).*/,"$1"),-1==r.indexOf(t)&&r.push(t)}}else{let t="";t=e.date.replace(/(\d{4}).*/,"$1"),-1==r.indexOf(t)&&r.push(t)}})),i=Mustache.to_html($("[data-fs-tmpl-backnumber]").html(),{param:r}),d.html(i),d.find('option[value="'+t+'"]').attr("selected","selected"),0==r.length&&($("html").prop("lang"),$('[data-news-select-submit="year"]').prepend('<option value="'+e+'">'+e+"</option>")),$("[data-news-select-submit]").on("change",(function(e){$this=$(this),null!=s.category_filter&&$("[data-category-hidden]").attr("name","category_filter").val(s.category_filter),"year"==$this.data("news-select-submit")&&$("[data-news-select-submit]").attr("name","year_filter"),$this.parents("form").submit()}))},dummy:!1})}));